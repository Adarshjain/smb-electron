import {mapToRegex} from "@/lib/myUtils.tsx";

const decodeMap: Record<string, string> = {
    '∙': 'ஃ',
    '‚': 'ஸ்ரீ',
    '¢': 'ரி',
    '‡¡': 'க்ஷா',
    '‡¢': 'க்ஷி',
    '‡£': 'க்ஷீ',
    '‡¤': 'க்ஷு',
    '‡¥': 'க்ஷூ',
    '¦‡': 'க்ஷெ',
    '§‡': 'க்ஷே',
    '¨‡': 'க்ஷை',
    '¦‡¡': 'க்ஷொ',
    '§‡¡': 'க்ஷோ',
    '¦‡Ç': 'க்ஷௌ',
    '‡': 'க்ஷ',
    'Œ': 'க்ஷ்',
    '¦¸ª': 'கௌ',
    '§¸¡': 'கோ',
    '¦¸¡': 'கொ',
    '¸¡': 'கா',
    '¸¢': 'கி',
    '¸£': 'கீ',
    'Ì': 'கு',
    'Ü': 'கூ',
    '¦¸': 'கெ',
    '§¸': 'கே',
    '¨¸': 'கை',
    'ì': 'க்',
    '¸': 'க',
    '¦¹ª': 'ஙௌ',
    '§¹¡': 'ஙோ',
    '¦¹¡': 'ஙொ',
    '¹¡': 'ஙா',
    '¹¢': 'ஙி',
    '¹£': 'ஙீ',
    '™': 'ஙு',
    '›': 'ஙூ',
    '¦¹': 'ஙெ',
    '§¹': 'ஙே',
    '¨¹': 'ஙை',
    'í': 'ங்',
    '¹': 'ங',
    '¦ºª': 'சௌ',
    '§º¡': 'சோ',
    '¦º¡': 'சொ',
    '¡¢': 'ரி',
    'º¡': 'சா',
    'º¢': 'சி',
    'º£': 'சீ',
    'Í': 'சு',
    'Ý': 'சூ',
    '¦º': 'செ',
    '§º': 'சே',
    '¨º': 'சை',
    'î': 'ச்',
    'º': 'ச',
    '¦ƒª': 'ஜௌ',
    '§ƒ¡': 'ஜோ',
    '¦ƒ¡': 'ஜொ',
    'ƒ¡': 'ஜா',
    'ƒ¢': 'ஜி',
    'ƒ£': 'ஜீ',
    'ƒ¤': 'ஜு',
    'ƒ¥': 'ஜூ',
    '¦ƒ': 'ஜெ',
    '§ƒ': 'ஜே',
    '¨ƒ': 'ஜை',
    'ˆ': 'ஜ்',
    'ƒ': 'ஜ',
    '¦»ª': 'ஞௌ',
    '§»¡': 'ஞோ',
    '¦»¡': 'ஞொ',
    '»¡': 'ஞா',
    '»¢': 'ஞி',
    '»£': 'ஞீ',
    'š': 'ஞு',
    'œ': 'ஞூ',
    '¦»': 'ஞெ',
    '§»': 'ஞே',
    '¨»': 'ஞை',
    'ï': 'ஞ்',
    '»': 'ஞ',
    '¦¼ª': 'டௌ',
    '§¼¡': 'டோ',
    '¦¼¡': 'டொ',
    '¼¡': 'டா',
    'Ê': 'டி',
    'Ë': 'டீ',
    'Î': 'டு',
    'Þ': 'டூ',
    '¦¼': 'டெ',
    '§¼': 'டே',
    '¨¼': 'டை',
    'ð': 'ட்',
    '¼': 'ட',
    '¦½ª': 'ணௌ',
    '§½¡': 'ணோ',
    '¦½¡': 'ணொ',
    '½¡': 'ணா',
    '½¢': 'ணி',
    '½£': 'ணீ',
    'Ï': 'ணு',
    'ß': 'ணூ',
    '¦½': 'ணெ',
    '§½': 'ணே',
    '¨½': 'ணை',
    'ñ': 'ண்',
    '½': 'ண',
    '¦¾ª': 'தௌ',
    '§¾¡': 'தோ',
    '¦¾¡': 'தொ',
    '¾¡': 'தா',
    '¾¢': 'தி',
    '¾£': 'தீ',
    'Ð': 'து',
    'à': 'தூ',
    '¦¾': 'தெ',
    '§¾': 'தே',
    '¨¾': 'தை',
    'ò': 'த்',
    '¾': 'த',
    '¦¿ª': 'நௌ',
    '§¿¡': 'நோ',
    '¦¿¡': 'நொ',
    '¿¡': 'நா',
    '¿¢': 'நி',
    '¿£': 'நீ',
    'Ñ': 'நு',
    'á': 'நூ',
    '¦¿': 'நெ',
    '§¿': 'நே',
    '¨¿': 'நை',
    'ó': 'ந்',
    '¿': 'ந',
    '¦Éª': 'னௌ',
    '§É¡': 'னோ',
    '¦É¡': 'னொ',
    'É¡': 'னா',
    'É¢': 'னி',
    'É£': 'னீ',
    'Û': 'னு',
    'ë': 'னூ',
    '¦É': 'னெ',
    '§É': 'னே',
    '¨É': 'னை',
    'ý': 'ன்',
    'É': 'ன',
    '¦Àª': 'பௌ',
    '§À¡': 'போ',
    '¦À¡': 'பொ',
    'À¡': 'பா',
    'À¢': 'பி',
    'À£': 'பீ',
    'Ò': 'பு',
    'â': 'பூ',
    '¦À': 'பெ',
    '§À': 'பே',
    '¨À': 'பை',
    'ô': 'ப்',
    'À': 'ப',
    '¦Áª': 'மௌ',
    '§Á¡': 'மோ',
    '¦Á¡': 'மொ',
    'Á¡': 'மா',
    'Á¢': 'மி',
    'Á£': 'மீ',
    'Ó': 'மு',
    'ã': 'மூ',
    '¦Á': 'மெ',
    '§Á': 'மே',
    '¨Á': 'மை',
    'õ': 'ம்',
    'Á': 'ம',
    '¦Âª': 'யௌ',
    '§Â¡': 'யோ',
    '¦Â¡': 'யொ',
    'Â¡': 'யா',
    'Â¢': 'யி',
    'Â£': 'யீ',
    'Ô': 'யு',
    'ä': 'யூ',
    '¦Â': 'யெ',
    '§Â': 'யே',
    '¨Â': 'யை',
    'ö': 'ய்',
    'Â': 'ய',
    '¦Ãª': 'ரௌ',
    '§Ã¡': 'ரோ',
    '¦Ã¡': 'ரொ',
    'Ã¡': 'ரா',
    'Ã¢': 'ரி',
    'Ã£': 'ரீ',
    'Õ': 'ரு',
    'å': 'ரூ',
    '¦Ã': 'ரெ',
    '§Ã': 'ரே',
    '¨Ã': 'ரை',
    '÷': 'ர்',
    'Ã': 'ர',
    '¦Äª': 'லௌ',
    '§Ä¡': 'லோ',
    '¦Ä¡': 'லொ',
    'Ä¡': 'லா',
    'Ä¢': 'லி',
    'Ä£': 'லீ',
    'Ö': 'லு',
    'æ': 'லூ',
    '¦Ä': 'லெ',
    '§Ä': 'லே',
    '¨Ä': 'லை',
    'ø': 'ல்',
    'Ä': 'ல',
    '¦Çª': 'ளௌ',
    '§Ç¡': 'ளோ',
    '¦Ç¡': 'ளொ',
    'Ç¡': 'ளா',
    'Ç¢': 'ளி',
    'Ç£': 'ளீ',
    'Ù': 'ளு',
    'é': 'ளூ',
    '¦Ç': 'ளெ',
    '§Ç': 'ளே',
    '¨Ç': 'ளை',
    'û': 'ள்',
    'Ç': 'ள',
    '¦Åª': 'வௌ',
    '§Å¡': 'வோ',
    '¦Å¡': 'வொ',
    'Å¡': 'வா',
    'Å¢': 'வி',
    'Å£': 'வீ',
    '×': 'வு',
    'ç': 'வூ',
    '¦Å': 'வெ',
    '§Å': 'வே',
    '¨Å': 'வை',
    'ù': 'வ்',
    'Å': 'வ',
    '¦Æª': 'ழௌ',
    '§Æ¡': 'ழோ',
    '¦Æ¡': 'ழொ',
    'Æ¡': 'ழா',
    'Æ¢': 'ழி',
    'Æ£': 'ழீ',
    'Ø': 'ழு',
    'è': 'ழூ',
    '¦Æ': 'ழெ',
    '§Æ': 'ழே',
    '¨Æ': 'ழை',
    'ú': 'ழ்',
    'Æ': 'ழ',
    '¦Èª': 'றௌ',
    '§È¡': 'றோ',
    '¦È¡': 'றொ',
    'È¡': 'றா',
    'È¢': 'றி',
    'È£': 'றீ',
    'Ú': 'று',
    'ê': 'றூ',
    '¦È': 'றெ',
    '§È': 'றே',
    '¨È': 'றை',
    'ü': 'ற்',
    'È': 'ற',
    '¦†ª': 'ஹௌ',
    '§†¡': 'ஹோ',
    '¦†¡': 'ஹொ',
    '†¡': 'ஹா',
    '†¢': 'ஹி',
    '†£': 'ஹீ',
    '¦†': 'ஹெ',
    '§†': 'ஹே',
    '¨†': 'ஹை',
    '‹': 'ஹ்',
    '†': 'ஹ',
    '¦„ª': 'ஷௌ',
    '§„¡': 'ஷோ',
    '¦„¡': 'ஷொ',
    '„¡': 'ஷா',
    '„¢': 'ஷி',
    '„£': 'ஷீ',
    '¦„': 'ஷெ',
    '§„': 'ஷே',
    '¨„': 'ஷை',
    '‰': 'ஷ்',
    '„': 'ஷ',
    '¦…ª': 'ஸௌ',
    '§…¡': 'ஸோ',
    '¦…¡': 'ஸொ',
    '…¡': 'ஸா',
    '…¢': 'ஸி',
    '…£': 'ஸீ',
    '¦…': 'ஸெ',
    '§…': 'ஸே',
    '¨…': 'ஸை',
    'Š': 'ஸ்',
    '…': 'ஸ',
    '«': 'அ',
    '¬': 'ஆ',
    '­': 'இ',
    'þ': 'இ',
    '®': 'ஈ',
    '¯': 'உ',
    '°': 'ஊ',
    '±': 'எ',
    '²': 'ஏ',
    '³': 'ஐ',
    '´': 'ஒ',
    'µ': 'ஓ',
    '¶': 'ஔ',
}
const encodeMap: Record<string, string> = {
    'ஸ்ரீ': '‚',
    'ரி': '¡¢',
    'ஃ': '∙',
    'அ': '«',
    'ஆ': '¬',
    'இ': '­',
    'ஈ': '®',
    'உ': '¯',
    'ஊ': '°',
    'எ': '±',
    'ஏ': '²',
    'ஐ': '³',
    'ஒ': '´',
    'ஓ': 'µ',
    'ஔ': '¶',
    'க்ஷௌ': '¦‡Ç',
    'க்ஷொ': '¦‡¡',
    'க்ஷோ': '§‡¡',
    'க்ஷா': '‡¡',
    'க்ஷி': '‡¢',
    'க்ஷீ': '‡£',
    'க்ஷு': '‡¤',
    'க்ஷூ': '‡¥',
    'க்ஷெ': '¦‡',
    'க்ஷே': '§‡',
    'க்ஷை': '¨‡',
    'க்ஷ்': 'Œ',
    'க்ஷ': '‡',
    'கௌ': '¦¸ª',
    'கொ': '¦¸¡',
    'கோ': '§¸¡',
    'கா': '¸¡',
    'கி': '¸¢',
    'கீ': '¸£',
    'கு': 'Ì',
    'கூ': 'Ü',
    'கெ': '¦¸',
    'கே': '§¸',
    'கை': '¨¸',
    'க்': 'ì',
    'க': '¸',
    'ஙௌ': '¦¹ª',
    'ஙொ': '¦¹¡',
    'ஙோ': '§¹¡',
    'ஙா': '¹¡',
    'ஙி': '¹¢',
    'ஙீ': '¹£',
    'ஙு': '™',
    'ஙூ': '›',
    'ஙெ': '¦¹',
    'ஙே': '§¹',
    'ஙை': '¨¹',
    'ங்': 'í',
    'ங': '¹',
    'சௌ': '¦ºª',
    'சொ': '¦º¡',
    'சோ': '§º¡',
    'சா': 'º¡',
    'சி': 'º¢',
    'சீ': 'º£',
    'சு': 'Í',
    'சூ': 'Ý',
    'செ': '¦º',
    'சே': '§º',
    'சை': '¨º',
    'ச்': 'î',
    'ச': 'º',
    'ஜௌ': '¦ƒª',
    'ஜொ': '¦ƒ¡',
    'ஜோ': '§ƒ¡',
    'ஜா': 'ƒ¡',
    'ஜி': 'ƒ¢',
    'ஜீ': 'ƒ£',
    'ஜு': 'ƒ¤',
    'ஜூ': 'ƒ¥',
    'ஜெ': '¦ƒ',
    'ஜே': '§ƒ',
    'ஜை': '¨ƒ',
    'ஜ்': 'ˆ',
    'ஜ': 'ƒ',
    'ஞௌ': '¦»ª',
    'ஞொ': '¦»¡',
    'ஞோ': '§»¡',
    'ஞா': '»¡',
    'ஞி': '»¢',
    'ஞீ': '»£',
    'ஞு': 'š',
    'ஞூ': 'œ',
    'ஞெ': '¦»',
    'ஞே': '§»',
    'ஞை': '¨»',
    'ஞ்': 'ï',
    'ஞ': '»',
    'டௌ': '¦¼ª',
    'டொ': '¦¼¡',
    'டோ': '§¼¡',
    'டா': '¼¡',
    'டி': 'Ê',
    'டீ': 'Ë',
    'டு': 'Î',
    'டூ': 'Þ',
    'டெ': '¦¼',
    'டே': '§¼',
    'டை': '¨¼',
    'ட்': 'ð',
    'ட': '¼',
    'ணௌ': '¦½ª',
    'ணொ': '¦½¡',
    'ணோ': '§½¡',
    'ணா': '½¡',
    'ணி': '½¢',
    'ணீ': '½£',
    'ணு': 'Ï',
    'ணூ': 'ß',
    'ணெ': '¦½',
    'ணே': '§½',
    'ணை': '¨½',
    'ண்': 'ñ',
    'ண': '½',
    'தௌ': '¦¾ª',
    'தொ': '¦¾¡',
    'தோ': '§¾¡',
    'தா': '¾¡',
    'தி': '¾¢',
    'தீ': '¾£',
    'து': 'Ð',
    'தூ': 'à',
    'தெ': '¦¾',
    'தே': '§¾',
    'தை': '¨¾',
    'த்': 'ò',
    'த': '¾',
    'நௌ': '¦¿ª',
    'நொ': '¦¿¡',
    'நோ': '§¿¡',
    'நா': '¿¡',
    'நி': '¿¢',
    'நீ': '¿£',
    'நு': 'Ñ',
    'நூ': 'á',
    'நெ': '¦¿',
    'நே': '§¿',
    'நை': '¨¿',
    'ந்': 'ó',
    'ந': '¿',
    'னௌ': '¦Éª',
    'னொ': '¦É¡',
    'னோ': '§É¡',
    'னா': 'É¡',
    'னி': 'É¢',
    'னீ': 'É£',
    'னு': 'Û',
    'னூ': 'ë',
    'னெ': '¦É',
    'னே': '§É',
    'னை': '¨É',
    'ன்': 'ý',
    'ன': 'É',
    'பௌ': '¦Àª',
    'பொ': '¦À¡',
    'போ': '§À¡',
    'பா': 'À¡',
    'பி': 'À¢',
    'பீ': 'À£',
    'பு': 'Ò',
    'பூ': 'â',
    'பெ': '¦À',
    'பே': '§À',
    'பை': '¨À',
    'ப்': 'ô',
    'ப': 'À',
    'மௌ': '¦Áª',
    'மொ': '¦Á¡',
    'மோ': '§Á¡',
    'மா': 'Á¡',
    'மி': 'Á¢',
    'மீ': 'Á£',
    'மு': 'Ó',
    'மூ': 'ã',
    'மெ': '¦Á',
    'மே': '§Á',
    'மை': '¨Á',
    'ம்': 'õ',
    'ம': 'Á',
    'யௌ': '¦Âª',
    'யொ': '¦Â¡',
    'யோ': '§Â¡',
    'யா': 'Â¡',
    'யி': 'Â¢',
    'யீ': 'Â£',
    'யு': 'Ô',
    'யூ': 'ä',
    'யெ': '¦Â',
    'யே': '§Â',
    'யை': '¨Â',
    'ய்': 'ö',
    'ய': 'Â',
    'ரௌ': '¦Ãª',
    'ரொ': '¦Ã¡',
    'ரோ': '§Ã¡',
    'ரா': 'Ã¡',
    // 'ரி': 'Ã¢',
    'ரீ': 'Ã£',
    'ரு': 'Õ',
    'ரூ': 'å',
    'ரெ': '¦Ã',
    'ரே': '§Ã',
    'ரை': '¨Ã',
    'ர்': '÷',
    'ர': 'Ã',
    'லௌ': '¦Äª',
    'லொ': '¦Ä¡',
    'லோ': '§Ä¡',
    'லா': 'Ä¡',
    'லி': 'Ä¢',
    'லீ': 'Ä£',
    'லு': 'Ö',
    'லூ': 'æ',
    'லெ': '¦Ä',
    'லே': '§Ä',
    'லை': '¨Ä',
    'ல்': 'ø',
    'ல': 'Ä',
    'ளௌ': '¦Çª',
    'ளொ': '¦Ç¡',
    'ளோ': '§Ç¡',
    'ளா': 'Ç¡',
    'ளி': 'Ç¢',
    'ளீ': 'Ç£',
    'ளு': 'Ù',
    'ளூ': 'é',
    'ளெ': '¦Ç',
    'ளே': '§Ç',
    'ளை': '¨Ç',
    'ள்': 'û',
    'ள': 'Ç',
    'வௌ': '¦Åª',
    'வொ': '¦Å¡',
    'வோ': '§Å¡',
    'வா': 'Å¡',
    'வி': 'Å¢',
    'வீ': 'Å£',
    'வு': '×',
    'வூ': 'ç',
    'வெ': '¦Å',
    'வே': '§Å',
    'வை': '¨Å',
    'வ்': 'ù',
    'வ': 'Å',
    'ழௌ': '¦Æª',
    'ழொ': '¦Æ¡',
    'ழோ': '§Æ¡',
    'ழா': 'Æ¡',
    'ழி': 'Æ¢',
    'ழீ': 'Æ£',
    'ழு': 'Ø',
    'ழூ': 'è',
    'ழெ': '¦Æ',
    'ழே': '§Æ',
    'ழை': '¨Æ',
    'ழ்': 'ú',
    'ழ': 'Æ',
    'றௌ': '¦Èª',
    'றொ': '¦È¡',
    'றோ': '§È¡',
    'றா': 'È¡',
    'றி': 'È¢',
    'றீ': 'È£',
    'று': 'Ú',
    'றூ': 'ê',
    'றெ': '¦È',
    'றே': '§È',
    'றை': '¨È',
    'ற்': 'ü',
    'ற': 'È',
    'ஹௌ': '¦†ª',
    'ஹொ': '¦†¡',
    'ஹோ': '§†¡',
    'ஹா': '†¡',
    'ஹி': '†¢',
    'ஹீ': '†£',
    'ஹெ': '¦†',
    'ஹே': '§†',
    'ஹை': '¨†',
    'ஹ்': '‹',
    'ஹ': '†',
    'ஷௌ': '¦„ª',
    'ஷொ': '¦„¡',
    'ஷோ': '§„¡',
    'ஷா': '„¡',
    'ஷி': '„¢',
    'ஷீ': '„£',
    'ஷெ': '¦„',
    'ஷே': '§„',
    'ஷை': '¨„',
    'ஷ்': '‰',
    'ஷ': '„',
    'ஸௌ': '¦…ª',
    'ஸொ': '¦…¡',
    'ஸோ': '§…¡',
    'ஸா': '…¡',
    'ஸி': '…¢',
    'ஸீ': '…£',
    'ஸெ': '¦…',
    'ஸே': '§…',
    'ஸை': '¨…',
    'ஸ்': 'Š',
    'ஸ': '…',
}

const decodeMapRegex = mapToRegex(decodeMap);
const encodeMapRegex = mapToRegex(encodeMap);

// Simple cache for decode/encode results
const decodeCache = new Map<string, string>();
const encodeCache = new Map<string, string>();

export function decode<T extends string | null | undefined>(input: T): T {
    if (!input) return input;

    // Check cache first
    const cached = decodeCache.get(input);
    if (cached !== undefined) return cached as T;

    // Compute result
    const result = input.replace(decodeMapRegex, (match) => decodeMap[match] || match);

    // Store in cache
    decodeCache.set(input, result);

    return result as T;
}

export function encode<T extends string | null | undefined>(input: T): T {
    if (input == null) return input;
    
    // Check cache first
    const cached = encodeCache.get(input);
    if (cached !== undefined) return cached as T;
    
    // Compute result
    const result = input.replace(encodeMapRegex, (match) => encodeMap[match] || match);
    
    // Store in cache
    encodeCache.set(input, result);
    
    return result as T;
}
